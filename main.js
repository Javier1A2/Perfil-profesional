const translations = {
  es: {
    proj1title: "Sistema de Votaciones",
    proj2title: "EstaciÃ³n SatNOGS",
    proj3title: "Tesis â€” Brecha Digital",
    proj4title: 'Juego "Jump Man" (ESP32)',
    proj5title: "Sitio web responsivo",
    proj6title: "AplicaciÃ³n mÃ³vil con Expo",
    proj7title: "Calculadora Java",
    portfolio: "Portafolio",
    welcome: "Â¡Bienvenido!",
    about: "Sobre mÃ­",
    projects: "Proyectos",
    skills: "Habilidades y Herramientas",
    contact: "Contacto",
    lead: "Estudiante de IngenierÃ­a de Software",
    btnProjects: "Ver proyectos",
    btnGithub: "Mi GitHub",
    projGithub: "Ver en GitHub",
    btnContact: "Contactar",
    cvTitle: "Â¿Quieres saber mÃ¡s sobre mÃ­?",
    cvDesc: "Puedes descargar mi CV aquÃ­:",
    cvEsp: "CV EspaÃ±ol",
    cvIng: "CV InglÃ©s",
    bio1: "Soy estudiante de IngenierÃ­a de Software en la Facultad de TelemÃ¡tica (Universidad de Colima). Me apasiona el desarrollo de software seguro, la creaciÃ³n de aplicaciones web y mÃ³viles y la innovaciÃ³n tecnolÃ³gica aplicada a problemas reales.",
    bio2: "He trabajado en proyectos prÃ¡cticos que van desde la configuraciÃ³n de una estaciÃ³n SatNOGS en Raspberry Pi hasta el desarrollo de aplicaciones con Expo (React Native) y soluciones web con enfoque en seguridad y usabilidad. AdemÃ¡s, actualmente desarrollo una tesis sobre la brecha digital y su impacto en la inserciÃ³n laboral de MiPyMEs en Colima.",
    proj1desc: "AplicaciÃ³n web que permite a los usuarios participar en procesos de votaciÃ³n en lÃ­nea de forma segura y con resultados en tiempo real visualizados con grÃ¡ficos. Desarrollo en equipo, base de datos SQL y buen manejo de sesiones y validaciones.",
    gotoSite: "Ir al sitio",
    proj2desc: "ConfiguraciÃ³n completa de una Raspberry Pi para recibir y procesar datos de satÃ©lites, integrando sensores y scripts de automatizaciÃ³n para la red colaborativa SatNOGS. Aprendizaje en radiofrecuencia, antenas y gestiÃ³n de logs.",
    gotoDocs: "DocumentaciÃ³n SatNOGS",
    proj3desc: "InvestigaciÃ³n sobre la brecha digital y su impacto en la inserciÃ³n laboral en MiPyMEs de Colima. Incluye marco teÃ³rico, encuestas locales, anÃ¡lisis estadÃ­stico y una propuesta de capacitaciÃ³n y digitalizaciÃ³n para micro y pequeÃ±as empresas.",
    inProgress: "En desarrollo",
    proj4desc: "Videojuego 2D para ESP32 con pantalla LCD, joystick y audio mediante I2S. Uso de doble nÃºcleo: uno para lÃ³gica y otro para audio; optimizaciones en memoria y rendimiento.",
    proj5desc: "Ejercicio prÃ¡ctico de mejora de usabilidad y diseÃ±o para un sitio de noticias deportivas. Enfoque en responsive design, performance y accesibilidad.",
    proj6desc: "App multiplataforma (Android / iOS / Web) desarrollada con React Native + Expo, sistema de navegaciÃ³n y pruebas con Expo Go. Enfocada en desarrollo Ã¡gil y experiencia de usuario.",
    proj7desc: "AplicaciÃ³n de escritorio desarrollada en Java con interfaz grÃ¡fica, que permite realizar operaciones matemÃ¡ticas bÃ¡sicas. Enfoque en diseÃ±o de UI/UX y manejo de eventos.",
    seeMore: "Â¿Quieres ver mÃ¡s proyectos?",
    ctaDesc: "Puedo compartir repositorios adicionales, demos o presentaciones segÃºn lo requieras.",
    seeAllGithub: "Ver todo en GitHub",
    advanced: "Avanzado",
    intermediate: "Intermedio",
    basic: "BÃ¡sico",
    languages: "Lenguajes",
    frameworks: "Frameworks / Tools",
    softskills: "Habilidades blandas",
    comm: "ComunicaciÃ³n efectiva",
    team: "Trabajo en equipo",
    critical: "Pensamiento crÃ­tico",
    solve: "ResoluciÃ³n de problemas",
    time: "GestiÃ³n del tiempo",
    adapt: "Adaptabilidad",
    resp: "Responsabilidad",
    learn: "Aprendizaje continuo",
    contactDesc: "Si quieres hablar de prÃ¡cticas profesionales, colaboraciones o ver demos mÃ¡s extensos, escrÃ­beme y con gusto coordinamos:",
    networks: "Redes",
    email: "Correo",
    available: "Disponible para prÃ¡cticas, proyectos y colaboraciones locales (Colima) y remoto.",
    rights: "Todos los derechos reservados"
  },
  en: {
    proj1title: "Voting System",
    proj2title: "SatNOGS Station",
    proj3title: "Thesis â€” Digital Divide",
    proj4title: '"Jump Man" Game (ESP32)',
    proj5title: "Responsive Website",
    proj6title: "Mobile App with Expo",
    proj7title: "Java Calculator",
    portfolio: "Portfolio",
    welcome: "Welcome!",
    about: "About me",
    projects: "Projects",
    skills: "Skills & Tools",
    contact: "Contact",
    lead: "Software Engineering Student",
    btnProjects: "See projects",
    btnGithub: "My GitHub",
    projGithub: "View on GitHub",
    btnContact: "Contact",
    cvTitle: "Want to know more about me?",
    cvDesc: "You can download my CV here:",
    cvEsp: "CV Spanish",
    cvIng: "CV English",
    bio1: "I am a Software Engineering student at the Faculty of Telematics (University of Colima). I am passionate about secure software development, creating web and mobile applications, and technological innovation applied to real-world problems.",
    bio2: "I have worked on practical projects ranging from setting up a SatNOGS station on Raspberry Pi to developing applications with Expo (React Native) and web solutions focused on security and usability. I am currently working on a thesis about the digital divide and its impact on the labor insertion of SMEs in Colima.",
    proj1desc: "Web application that allows users to participate in online voting processes securely, with real-time results displayed with charts. Team development, SQL database, and good session and validation management.",
    gotoSite: "Go to site",
    proj2desc: "Complete setup of a Raspberry Pi to receive and process satellite data, integrating sensors and automation scripts for the collaborative SatNOGS network. Learning in radio frequency, antennas, and log management.",
    gotoDocs: "SatNOGS Docs",
    proj3desc: "Research on the digital divide and its impact on the labor insertion in SMEs in Colima. Includes theoretical framework, local surveys, statistical analysis, and a proposal for training and digitalization for micro and small businesses.",
    inProgress: "In progress",
    proj4desc: "2D video game for ESP32 with LCD screen, joystick, and audio via I2S. Dual-core use: one for logic and one for audio; memory and performance optimizations.",
    proj5desc: "Practical exercise to improve usability and design for a sports news site. Focus on responsive design, performance, and accessibility.",
    proj6desc: "Cross-platform app (Android / iOS / Web) developed with React Native + Expo, navigation system, and testing with Expo Go. Focused on agile development and user experience.",
    proj7desc: "Desktop application developed in Java with a graphical interface, allowing basic mathematical operations. Focus on UI/UX design and event handling.",
    seeMore: "Want to see more projects?",
    ctaDesc: "I can share additional repositories, demos, or presentations as needed.",
    seeAllGithub: "See all on GitHub",
    advanced: "Advanced",
    intermediate: "Intermediate",
    basic: "Basic",
    languages: "Languages",
    frameworks: "Frameworks / Tools",
    softskills: "Soft Skills",
    comm: "Effective communication",
    team: "Teamwork",
    critical: "Critical thinking",
    solve: "Problem solving",
    time: "Time management",
    adapt: "Adaptability",
    resp: "Responsibility",
    learn: "Continuous learning",
    contactDesc: "If you want to talk about internships, collaborations, or see more extensive demos, write to me and we can coordinate:",
    networks: "Networks",
    email: "Email",
    available: "Available for internships, projects and collaborations (Colima & remote).",
    rights: "All rights reserved"
  }
};

function setLang(lang) {

  localStorage.setItem('lang', lang);
  document.documentElement.lang = lang;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
  // Cambia el texto del botÃ³n
  const langBtn = document.getElementById('toggle-lang');
  if (langBtn) langBtn.textContent = lang === 'es' ? 'English' : 'EspaÃ±ol';
}

document.addEventListener('DOMContentLoaded', function() {
  // Inicializa idioma
  const userLang = localStorage.getItem('lang') || 'es';
  setLang(userLang);

  // Toggle idioma
  const langBtn = document.getElementById('toggle-lang');
  if (langBtn) {
    langBtn.addEventListener('click', function() {
      setLang(document.documentElement.lang === 'es' ? 'en' : 'es');
    });
  }

  // Toggle modo claro/oscuro
  const toggleBtn = document.getElementById('toggle-theme');
  const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
  if (localStorage.getItem('theme') === 'light' || (prefersLight && !localStorage.getItem('theme'))) {
    document.body.classList.add('light-mode');
    if(toggleBtn) toggleBtn.textContent = 'ðŸŒ™';
  }
  if(toggleBtn) {
    toggleBtn.addEventListener('click', function() {
      document.body.classList.toggle('light-mode');
      if(document.body.classList.contains('light-mode')) {
        localStorage.setItem('theme', 'light');
        toggleBtn.textContent = 'ðŸŒ™';
      } else {
        localStorage.setItem('theme', 'dark');
        toggleBtn.textContent = 'â˜€ï¸';
      }
    });
  }

  // Ilumina habilidades por nivel (si tienes este script)
  document.querySelectorAll('.skills-legend span').forEach(function(legend){
    legend.addEventListener('mouseenter', function(){
      const level = legend.getAttribute('data-skill');
      document.querySelectorAll('.skills-list .skill-dot.'+level).forEach(function(dot){
        dot.style.boxShadow = level === 'avanzado'
          ? '0 0 0 4px #10ac8490, 0 1px 4px rgba(0,0,0,0.12)'
          : level === 'intermedio'
          ? '0 0 0 4px #fbc53190, 0 1px 4px rgba(0,0,0,0.12)'
          : '0 0 0 4px #e1705590, 0 1px 4px rgba(0,0,0,0.12)';
        dot.style.borderColor = level === 'avanzado'
          ? '#10ac84'
          : level === 'intermedio'
          ? '#fbc531'
          : '#e17055';
        dot.style.filter = 'brightness(1.2)';
        if(dot.parentElement) {
          dot.parentElement.style.background = level === 'avanzado'
            ? 'rgba(16,172,132,0.13)'
            : level === 'intermedio'
            ? 'rgba(251,197,49,0.13)'
            : 'rgba(225,112,85,0.13)';
          dot.parentElement.style.borderRadius = '6px';
          dot.parentElement.style.color = '#fff';
          dot.parentElement.style.fontWeight = 'bold';
        }
      });
    });
    legend.addEventListener('mouseleave', function(){
      const level = legend.getAttribute('data-skill');
      document.querySelectorAll('.skills-list .skill-dot.'+level).forEach(function(dot){
        dot.style.boxShadow = '';
        dot.style.borderColor = '';
        dot.style.filter = '';
        if(dot.parentElement) {
          dot.parentElement.style.background = '';
          dot.parentElement.style.borderRadius = '';
          dot.parentElement.style.color = '';
          dot.parentElement.style.fontWeight = '';
        }
      });
    });
  });


// MenÃº mÃ³vil (debe estar global para el onclick del HTML)
window.toggleMobileNav = function(){
  const nav = document.getElementById('mobileNav');
  const btn = document.querySelector('.menu-toggle');
  if(!nav) return;
  const visible = nav.style.display === 'flex';
  nav.style.display = visible ? 'none' : 'flex';
  btn.setAttribute('aria-expanded', String(!visible));
  nav.setAttribute('aria-hidden', String(visible));
  // Focus al primer enlace cuando se abre
  if (!visible) {
    const firstLink = nav.querySelector('a');
    if (firstLink) firstLink.focus();
  }
}

  // Cierra el menÃº mÃ³vil al hacer clic en un enlace
  const mobileNav = document.getElementById('mobileNav');
  if (mobileNav) {
    mobileNav.querySelectorAll('a').forEach(function(link) {
      link.addEventListener('click', function() {
        mobileNav.style.display = 'none';
        const btn = document.querySelector('.menu-toggle');
        if(btn) btn.setAttribute('aria-expanded','false');
        mobileNav.setAttribute('aria-hidden','true');
      });
    });
  }

  // Corrige menÃº mÃ³vil al redimensionar
    window.addEventListener('resize', ()=> {
      if(window.innerWidth > 768){
        const nav = document.getElementById('mobileNav');
        if(nav) nav.style.display = 'none';
        const btn = document.querySelector('.menu-toggle');
        if(btn) btn.setAttribute('aria-expanded','false');
      }
    });
  });